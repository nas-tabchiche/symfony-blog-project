{% extends "base_admin.html.twig" %}

{% block content %}
	<div class="liste_posts">
		<div class="container">
			<div class="row">
				<div class="col s12">
					<a href="{{ path('ajout_post') }}" class="btn btn blue darken-4" style="float: right">Rédiger un post</a>
					<h5>Posts</h5>
					<table>
						<tr>
							<th>#</th>
							<th>Titre</th>
							<th>Publié</th>
							<th>Date de publication</th>
							<th>Dernière modification</th>
							<th>Actions</th>
						</tr>
						{% set i = 1 %}
						{% for post in posts %}
							<tr>
								<td>{{ i }}</td>
								<td>
									<a href="{{ path('afficher_post', {'id': post.id}) }}" target="_blank">{{ post.title }}</a>
								</td>
								<td>
									<span class="badge {{ post.isPublished ? 'blue' : 'red' }}">
										{{ post.isPublished ? 'oui' : 'non' }}
									</span>
								</td>
								<td>{{ post.isPublished ? post.publishedAt|date('d/m/Y') : '-' }}</td>
								<td>{{ post.updatedAt|date('d/m/Y') }}</td>
								<td>
									<a href="{{ path('modifier_post', {'id': post.id}) }}">
										<i class="material-icons blue-text">edit</i>
									</a>
									<a href="{{ path('supprimer_post', {'id': post.id}) }}">
										<i class="material-icons red-text">delete</i>
									</a>
								</td>
							</tr>
							{% set i = i+1 %}
						{% endfor %}
					</table>
				</div>
			</div>
		</div>
	{% endblock %}
